# =============================================================================
# CodePark Security Configuration - Environment Variables
# =============================================================================
# Copy this file to .env and update the values for your environment
# All values marked as (REQUIRED) must be set
# Optional values have defaults shown in comments
# =============================================================================

# ============== SERVER CONFIGURATION ==============
NODE_ENV=production  # development, staging, production (REQUIRED)
PORT=3000            # Server port (default: 3000)
LOG_LEVEL=info       # error, warn, info, debug (default: info)

# ============== MONGODB DATABASE CONFIGURATION ==============
MONGODB_URL=mongodb+srv://user:password@cluster.mongodb.net/codepark  # (REQUIRED)
MONGODB_USER=your_mongodb_user              # Optional
MONGODB_PASSWORD=your_mongodb_password      # Optional

# MongoDB TLS/SSL Configuration
MONGODB_TLS=true                            # Enable TLS encryption (true/false, default: false)
MONGODB_CA_CERT=/etc/mongodb/ca.crt         # Path to CA certificate (required if MONGODB_TLS=true)
MONGODB_CLIENT_CERT=/etc/mongodb/client.crt # Path to client certificate (required if MONGODB_TLS=true)
MONGODB_CLIENT_KEY=/etc/mongodb/client.key  # Path to client key (required if MONGODB_TLS=true)

# ============== REDIS CACHE CONFIGURATION ==============
REDIS_HOST=localhost                        # Redis host (default: localhost)
REDIS_PORT=6379                             # Redis port (default: 6379)
REDIS_PASSWORD=your_redis_password          # Optional - use strong password

# Redis TLS/SSL Configuration
REDIS_TLS=true                              # Enable TLS encryption (true/false, default: false)
REDIS_CA_CERT=/etc/redis/ca.crt             # Path to CA certificate (required if REDIS_TLS=true)
REDIS_CLIENT_CERT=/etc/redis/client.crt     # Path to client certificate (required if REDIS_TLS=true)
REDIS_CLIENT_KEY=/etc/redis/client.key      # Path to client key (required if REDIS_TLS=true)

# ============== JWT AUTHENTICATION ==============
# Generate with: openssl rand -base64 32
JWT_SECRET=your_super_secret_jwt_key_at_least_32_chars_long_here  # (REQUIRED - min 32 chars)
JWT_EXPIRY=7d                               # JWT expiration (default: 7d)
JWT_REFRESH_SECRET=your_super_secret_refresh_key_at_least_32_chars_long  # (REQUIRED - min 32 chars)
JWT_REFRESH_EXPIRY=30d                      # Refresh token expiration (default: 30d)

# ============== SECURITY & CORS ==============
CORS_ORIGINS=https://codepark.example.com,https://app.codepark.example.com  # Comma-separated origins
WEBHOOK_SECRET=your_webhook_secret_key     # Used for webhook HMAC-SHA256 signing
WEBHOOK_DOMAINS=example.com,webhook.example.com  # Allowed webhook domains

# ============== FEATURE FLAGS ==============
ENABLE_GRAPHQL=true                         # Enable GraphQL API (true/false, default: true)
ENABLE_WEBHOOKS=true                        # Enable webhooks (true/false, default: true)

# ============== MONITORING & OBSERVABILITY ==============
SENTRY_DSN=https://your_sentry_dsn_here@sentry.io/project_id  # Optional - Sentry error tracking
DATADOG_API_KEY=your_datadog_api_key                          # Optional - Datadog metrics
OPENTELEMETRY_ENABLED=true                                    # Enable OpenTelemetry (default: false)

# ============== NOTES ==============
# 
# 1. REQUIRED VARIABLES (application will not start without these):
#    - NODE_ENV
#    - MONGODB_URL
#    - JWT_SECRET (min 32 characters)
#    - JWT_REFRESH_SECRET (min 32 characters)
#
# 2. TLS CERTIFICATES:
#    If REDIS_TLS=true or MONGODB_TLS=true, ensure certificate files exist at specified paths.
#    Generate self-signed certificates with:
#    openssl req -x509 -nodes -days 365 -newkey rsa:2048 -keyout private.key -out cert.crt
#
# 3. PASSWORD REQUIREMENTS:
#    - JWT_SECRET and JWT_REFRESH_SECRET: Minimum 32 characters
#    - REDIS_PASSWORD: Use strong passwords (min 12 characters with mixed case, numbers, symbols)
#    - MONGODB_PASSWORD: Use strong passwords
#
# 4. PRODUCTION CHECKLIST:
#    [ ] NODE_ENV=production
#    [ ] All REQUIRED variables set
#    [ ] TLS enabled for Redis (REDIS_TLS=true)
#    [ ] TLS enabled for MongoDB (MONGODB_TLS=true)
#    [ ] All certificate files in place
#    [ ] Strong JWT secrets (32+ chars, randomized)
#    [ ] CORS_ORIGINS configured correctly
#    [ ] WEBHOOK_SECRET set and strong
#    [ ] LOG_LEVEL set appropriately
#
# 5. SECURITY BEST PRACTICES:
#    - Never commit .env files to version control
#    - Use environment variables or secrets management systems
#    - Rotate JWT secrets periodically
#    - Use strong, randomly generated values
#    - Keep TLS certificates updated
#    - Monitor for security updates
#
# =============================================================================
