name: CI

on: [push, pull_request]

jobs:
  build:
    runs-on: ubuntu-latest

    steps:
    - name: Checkout code
      uses: actions/checkout@v2

    - name: Renovate Bot GitHub Action
      uses: renovatebot/github-action@v40.2.5

    - name: First interaction
      uses: actions/first-interaction@v1.3.0
      with:
        repo-token: ${{ secrets.GITHUB_TOKEN }}
        issue-message: 'Thank you for your issue!'
        pr-message: 'Thank you for your pull request!'

    - name: Renovate Bot GitHub Action
      uses: renovatebot/github-action@v36.0.0
      with:
        configurationFile: '.github/renovate.json'
        token: ${{ secrets.RENOVATE_TOKEN }}
        useSlim: true
        env-regex: '^(?:RENOVATE_\\w+|LOG_LEVEL|GITHUB_COM_TOKEN|NODE_OPTIONS)$'
        renovate-version: 'latest'

    - name: Upload Tool Results To Pixeebot
      uses: pixee/upload-tool-results-action@v2.3.0

    - name: Create Pull Request
      uses: peter-evans/create-pull-request@v6.1.0
