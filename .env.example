# CodePark Environment Configuration
# Copy this file to .env and update with your actual values

# ================================
# Application Settings
# ================================
NODE_ENV=development
PORT=3000
HOST=localhost
API_VERSION=v1

# ================================
# Database Configuration
# ================================
# MongoDB
MONGODB_URI=mongodb://localhost:27017/codepark
MONGODB_USER=
MONGODB_PASSWORD=
MONGODB_DB_NAME=codepark
MONGODB_MAX_POOL_SIZE=10

# Redis
REDIS_ENABLED=false
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=
REDIS_DB=0
REDIS_TLS=false
REDIS_MAX_RETRIES_PER_REQUEST=3

# ================================
# Authentication & Security
# ================================
# JWT Configuration
# CRITICAL: Generate strong random secrets before production!
# Use: openssl rand -base64 64
# Or: node -e "console.log(require('crypto').randomBytes(64).toString('base64'))"
JWT_SECRET=CHANGE-THIS-TO-A-STRONG-RANDOM-SECRET-IN-PRODUCTION
JWT_REFRESH_SECRET=CHANGE-THIS-TO-A-DIFFERENT-STRONG-RANDOM-SECRET
JWT_EXPIRY=15m
JWT_REFRESH_EXPIRY=7d
JWT_ALGORITHM=HS256

# Session Configuration
SESSION_SECRET=CHANGE-THIS-TO-A-STRONG-RANDOM-SESSION-SECRET
SESSION_MAX_AGE=86400000
SESSION_SECURE=false
SESSION_SAME_SITE=lax
SESSION_HTTP_ONLY=true

# Password Hashing (Argon2)
ARGON2_MEMORY_COST=65536
ARGON2_TIME_COST=3
ARGON2_PARALLELISM=4
ARGON2_HASH_LENGTH=32

# Two-Factor Authentication
TOTP_ISSUER=CodePark
TOTP_WINDOW=1
TOTP_STEP=30

# ================================
# Rate Limiting
# ================================
RATE_LIMIT_WINDOW_MS=900000
RATE_LIMIT_MAX_REQUESTS=100
RATE_LIMIT_AUTH_MAX=5
RATE_LIMIT_GRAPHQL_MAX=50
RATE_LIMIT_WEBSOCKET_MAX=10
GAME_RATE_LIMIT_WINDOW_MS=300000
GAME_RATE_LIMIT_MAX=20

# ================================
# CORS Configuration
# ================================
ALLOWED_ORIGINS=http://localhost:3000,http://localhost:3001
ALLOWED_ORIGIN=*
CORS_CREDENTIALS=true
CORS_MAX_AGE=600

# ================================
# API Configuration
# ================================
# GraphQL
GRAPHQL_PORT=4000
GRAPHQL_PATH=/graphql
GRAPHQL_INTROSPECTION=true
GRAPHQL_PLAYGROUND=true
GRAPHQL_DEPTH_LIMIT=10
GRAPHQL_COMPLEXITY_LIMIT=1000

# REST API
API_PREFIX=/api/v1
MAX_REQUEST_SIZE=10mb

# ================================
# WebSocket Configuration
# ================================
WS_ENABLED=true
WS_PORT=3001
WS_PATH=/socket.io
WS_PING_TIMEOUT=60000
WS_PING_INTERVAL=25000
WS_HEARTBEAT_INTERVAL=30000
WS_MAX_HTTP_BUFFER_SIZE=1e8

# ================================
# Game Settings
# ================================
MAX_CONCURRENT_GAMES=1000
GAME_EXPIRY_MINUTES=10
GAME_CLEANUP_INTERVAL=300000

# ================================
# File Upload
# ================================
MAX_FILE_SIZE=10485760
UPLOAD_DIR=./uploads
ALLOWED_FILE_TYPES=image/jpeg,image/png,image/gif,application/pdf
TEMP_DIR=./tmp

# ================================
# Email Configuration
# ================================
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_SECURE=false
SMTP_USER=your-email@gmail.com
SMTP_PASSWORD=your-email-password
EMAIL_FROM=noreply@codepark.dev
EMAIL_FROM_NAME=CodePark

# ================================
# Monitoring & Observability
# ================================
# Sentry Error Tracking
SENTRY_DSN=
SENTRY_ENVIRONMENT=development
SENTRY_TRACES_SAMPLE_RATE=1.0
SENTRY_PROFILES_SAMPLE_RATE=1.0

# OpenTelemetry
OTEL_SERVICE_NAME=codepark
OTEL_EXPORTER_OTLP_ENDPOINT=http://localhost:4318
OTEL_TRACES_SAMPLER=always_on
OTEL_METRICS_EXPORTER=prometheus

# Prometheus
METRICS_ENABLED=true
METRICS_PORT=9090
PROMETHEUS_PATH=/metrics

# Logging
LOG_LEVEL=info
LOG_FORMAT=json
LOG_PRETTY=true
LOG_FILE_PATH=./logs/app.log
LOG_ERROR_FILE_PATH=./logs/error.log
LOG_MAX_SIZE=10m
LOG_MAX_FILES=7d

# ================================
# External Services
# ================================
# Kafka
KAFKA_ENABLED=false
KAFKA_BROKERS=localhost:9092
KAFKA_CLIENT_ID=codepark
KAFKA_GROUP_ID=codepark-group
KAFKA_RETRY_ATTEMPTS=3

# Cloudflare Workers (Edge Computing)
CLOUDFLARE_ACCOUNT_ID=
CLOUDFLARE_API_TOKEN=
CLOUDFLARE_WORKER_NAME=codepark-worker

# BullMQ Job Queue
BULLMQ_ENABLED=true
BULLMQ_REDIS_HOST=localhost
BULLMQ_REDIS_PORT=6379

# ================================
# AI/ML Configuration
# ================================
# TensorFlow
TF_MODEL_PATH=./models
TF_ENABLE_GPU=false
TF_THREADS=4

# NLP Configuration
NLP_LANGUAGE=en
NLP_MIN_CONFIDENCE=0.7

# OpenAI API (if using)
OPENAI_API_KEY=
OPENAI_MODEL=gpt-4
OPENAI_MAX_TOKENS=2000

# ================================
# Feature Flags
# ================================
ENABLE_GRAPHQL=true
ENABLE_WEBSOCKET=true
ENABLE_AI_FEATURES=true
ENABLE_KAFKA=false
ENABLE_METRICS=true
ENABLE_TRACING=true
ENABLE_2FA=true

# ================================
# Security Features
# ================================
ENABLE_HELMET=true
ENABLE_RATE_LIMITING=true
ENABLE_CORS=true
ENABLE_CSRF_PROTECTION=true
ENABLE_HPP_PROTECTION=true
ENABLE_INPUT_SANITIZATION=true
ENABLE_SECURITY_AUDIT_LOG=true

# ================================
# Compression & Cache
# ================================
COMPRESSION_ENABLED=true
COMPRESSION_LEVEL=6
COMPRESSION_THRESHOLD=1024
CACHE_TTL=300
CACHE_ENABLED=true
CACHE_MAX_SIZE=100

# ================================
# Development Tools
# ================================
ENABLE_HOT_RELOAD=true
ENABLE_DEBUG=false
ENABLE_PROFILING=false
ENABLE_SOURCE_MAPS=true

# ================================
# Testing
# ================================
TEST_MONGODB_URI=mongodb://localhost:27017/codepark_test
TEST_REDIS_HOST=localhost
TEST_REDIS_PORT=6379
TEST_JWT_SECRET=test-jwt-secret
TEST_TIMEOUT=30000

# ================================
# Maintenance
# ================================
MAINTENANCE_MODE=false
MAINTENANCE_MESSAGE=System is under maintenance. Please try again later.
MAINTENANCE_ALLOWED_IPS=127.0.0.1,::1

# ================================
# SECURITY WARNINGS
# ================================
# 1. NEVER commit .env file to version control
# 2. Generate cryptographically strong secrets:
#    openssl rand -base64 64
# 3. Use different secrets for JWT_SECRET and JWT_REFRESH_SECRET
# 4. Rotate secrets regularly in production
# 5. Use a secret management service (AWS Secrets Manager, Vault, etc.)
# 6. Enable all security features in production
# 7. Set SESSION_SECURE=true in production (requires HTTPS)
# 8. Restrict ALLOWED_ORIGINS in production
# 9. Disable introspection and playground in production GraphQL
# 10. Set strong Redis password in production

# ================================
# EXPERIMENTAL WARNING
# ================================
# This project uses pre-release (next/latest) package versions
# - Monitor security advisories regularly: npm audit
# - Run: npm run security-check before deployment
# - Keep dependencies updated: npm run update:experimental
# - Review Snyk dashboard for vulnerabilities
# - Test thoroughly before production deployment
